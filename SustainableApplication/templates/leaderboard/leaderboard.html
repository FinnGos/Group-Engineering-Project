{% extends "base.html" %}
{% load static %}
{% block title %}Leaderboard{% endblock %}
{% block content %}
<!-- Link to leaderboard.css -->
<link rel="stylesheet" href="{% static 'leaderboard.css' %}">

<!-- Wrapper for mobile background -->
<div class="mobile-bg">
    <!-- Image Section -->
    <div class="top-section relative">
        <img src="{% static 'images/leaderboardTop_v2.jpg' %}" alt="Top Image" class="w-full h-auto">
        <!-- Leaderboard Section -->
        <div class="leaderboard mt-8 absolute inset-0 flex flex-col justify-top items-center text-white">
            <div class="font-bold text-white text-center p-6 mb-6 mobile-header-container">
                <h1 class="text-xl sm:text-3xl mb-1">Leaderboard</h1>
                <h2 class="text-lg sm:text-2xl mb-4">Can you become the ultimate CarboCollector?</h2>
                <h3 class="text-xl sm:text-2xl">Current Rankings:</h3>
            </div>
            <!-- Display the Top 5 Leaderboard Entries -->
            <div class="rankings w-full max-w-3xl mobile-rankings">
                {% for entry in ranked_users %}
                <div class="rank-item bg-gray-700 p-4 mb-4 flex justify-between items-center rounded-lg
                    {% if entry.rank == 1 %}rank-1 border-4
                    {% elif entry.rank == 2 %}rank-2 border-4
                    {% elif entry.rank == 3 %}rank-3 border-4
                    {% elif entry.rank == 4 %}rank-4
                    {% elif entry.rank == 5 %}rank-5{% endif %}">
                    <span class="rank text-sm sm:text-xl text-white">{{ entry.rank }}</span>
                    <span class="name text-sm sm:text-lg text-white">{{ entry.user.username }}</span>
                    <span class="points text-sm sm:text-base text-white">{{ entry.user.all_time_points }}</span>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    <!-- Image Section -->
    <div class="bottom-section relative">
        <style>
            /* Mobile-specific styles */
            @media (max-width: 640px) {
                .mobile-bg {
                    background-color: #008000; /* Green background for mobile */
                }
                /* (Keep your existing mobile-specific styles below) */
                .mobile-header-container {
                    padding-top: 0 !important;
                    padding-bottom: 0 !important;
                    margin-top: -20px !important;
                    margin-bottom: 0 !important;
                }
                .top-section h1 {
                    font-size: 1.25rem !important;
                    margin-bottom: 0 !important;
                }
                .top-section h2 {
                    font-size: 0.75rem !important;
                    margin-bottom: 2px !important;
                }
                .top-section h3 {
                    font-size: 1rem !important;
                    margin-bottom: 2px !important;
                }
                .mobile-rankings {
                    margin-top: 20px !important;
                    display: block !important;
                    visibility: visible !important;
                    width: 90% !important;
                    max-width: 90% !important;
                    position: relative !important;
                    z-index: 50 !important;
                    transform: scale(0.9) !important;
                    transform-origin: top center !important;
                }
                .rank-item {
                    padding: 0.25rem !important;
                    margin-bottom: 0.25rem !important;
                    border-width: 1px !important;
                    min-height: 0 !important;
                }
                .rank {
                    font-size: 0.5rem !important;
                }
                .name {
                    font-size: 0.5rem !important;
                }
                .points {
                    font-size: 0.5rem !important;
                }
                .mobile-bottom-container {
                    padding: 0 !important;
                    border: none !important;
                    background-color: transparent !important;
                    height: 300px !important;
                    margin-top: 20px !important;
                    z-index: 10 !important;
                }
                .mobile-bottom-image {
                    height: 300px !important;
                    width: 100vw !important;
                    object-fit: cover !important;
                    object-position: center !important;
                }
                .desktop-current-points {
                    display: none !important;
                }
                .mobile-current-points {
                    padding: 2px !important;
                    width: 60% !important;
                    max-width: 150px !important;
                    position: absolute;
                    bottom: 60px !important;
                    transform: scale(0.4) !important;
                    transform-origin: center bottom !important;
                    z-index: 20 !important;
                }
                .mobile-current-points h3 {
                    font-size: 0.9rem !important;
                    margin-bottom: 0 !important;
                }
                .mobile-current-points p {
                    font-size: 0.7rem !important;
                    margin-bottom: 0 !important;
                }
                .mobile-buttons-container {
                    bottom: 10px !important;
                    transform: scale(0.7) !important;
                    transform-origin: center bottom !important;
                    width: 100% !important;
                    z-index: 20 !important;
                }
                .mobile-button {
                    padding: 3px 6px !important;
                    font-size: 0.6rem !important;
                    margin: 1px auto !important;
                }
            }
        </style>

        <!-- Desktop version of bottom section -->
        <div class="hidden sm:block image-container bg-green-700 p-10 border-12 border-green-700 overflow-hidden" style="height: 800px;">
            <img src="{% static 'images/leaderboardBottom_v2.jpg' %}" alt="Image" class="w-full h-full rounded-lg object-cover" style="object-position: center;">
        </div>
        
        <!-- Mobile version of bottom section -->
        <div class="sm:hidden mobile-bottom-container overflow-hidden">
            <img src="{% static 'images/leaderboardBottom_v2.jpg' %}" alt="Image" class="mobile-bottom-image">
        </div>
    </div>
</div>
{% endblock %}
